



```{r decide whether to show cognition based on available kuadrc or bold data}
#| echo: false
#| eval: !expr (params$kuadrc_cognition) | (params$bold_cognition)
#| results: asis

# Down Syndrome Mental Status Exam
dsmse_variables <- c("dsmsett2", "dsvistt2", "dssmtot2", "dsmmtot2", "dslgtot2")
dsmse_df <- BRIDGE21::get_database_values(!!!dsmse_variables, data = data)
if (all(apply(dsmse_df[, dsmse_variables], 2, is.na))) {
  params$kuadrc_dsmse <- params$bold_dsmse <- FALSE
}


# Modified Cued Recall Test
mcrt_variables <- c("dscrttfr", "dsccttcr")
mcrt_df <- BRIDGE21::get_database_values(!!!mcrt_variables, data = data)
if (all(apply(mcrt_df[, mcrt_variables], 2, is.na))) {
  params$kuadrc_mcrt <- params$bold_mcrt <- FALSE
}

# National Task Group - Early Detection and Screen for Dementia (NTG-EDSD)
ntgedsd <- colnames(dplyr::select(data, dsadl1:dsother6))
ntgedsd_df <- BRIDGE21::get_database_values(!!!ntgedsd, data = data)
if (rlang::is_empty(ntgedsd_df)) {
  params$kuadrc_ntgedsd <- params$bold_ntgedsd <- FALSE
}

# Vineland Adaptive Behavior Scale
vineland_variables <- c(
  "vnld_abcss",
  "vnld_commss",
  "vnld_dlivss",
  "vnld_soclss"
)
vineland_df <- BRIDGE21::get_database_values(!!!vineland_variables, data = data)
if (all(apply(vineland_df[, vineland_variables], 2, is.na))) {
  params$bold_vineland <- FALSE
}


after_memory_section <- (params$kuadrc_dsmse & !params$kuadrc_mcrt) |
  (params$bold_dsmse & !params$bold_mcrt)

kuadrc_cognition <- paste0("kuadrc_", c("dsmse", "mcrt", "ntgedsd"))
bold_cognition <- paste0("bold_", c("dsmse", "mcrt", "ntgedsd", "vineland"))

if (
  any(unlist(params[kuadrc_cognition])) | any(unlist(params[bold_cognition]))
) {
  BRIDGE21::format_quarto(
    "MEMORY AND THINKING TEST SCORES",
    type = "section"
  )
}

```

<!--- Down Syndrom Mental Status Exam --->

{{< include sections/cognition/components/dsmse.qmd >}}

<!--- Modified Cued Recall Test --->

{{< include sections/cognition/components/mcrt.qmd >}}

<!--- National Task Group - Early Detection and Screen for Dementia (NTG-EDSD) --->

{{< include sections/cognition/components/ntgedsd.qmd >}}

<!--- Vineland Adaptive Behavior Scale --->

{{< include sections/cognition/components/vineland.qmd >}}